<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Draevorn - Factions Lumi√®re & T√©n√®bres</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ‚úÖ V√©rification de session -->
  <script>
    (function(){
      const s = sessionStorage.getItem('draevorn_logged');
      if (!s) {
        window.location.replace('login.html');
        return;
      }
      const data = JSON.parse(s);
      const maxAge = 24*60*60*1000; // 24h en ms
      if (!data.user || (Date.now() - (data.ts || 0) > maxAge)) {
        sessionStorage.removeItem('draevorn_logged');
        window.location.replace('login.html');
        return;
      }
      console.log('Utilisateur connect√© :', data.user);
    })();
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { font-family: 'Orbitron', sans-serif; color: #fff; scroll-behavior: smooth; overflow-x: hidden; }
    body { background: url("ezgif-429320cb4399fc.gif") no-repeat center center fixed; background-size: cover; position: relative; }
    body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: -1; }

    #intro-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, #000, #111); display: flex; align-items: center; justify-content: center; flex-direction: column; color: #ffd700; font-size: 2.8em; z-index: 2000; animation: fadeOut 2s forwards; animation-delay: 1s; }
    #intro-screen h1 { animation: glow 2s infinite alternate; text-shadow: 0 0 20px #ffd700; }
    @keyframes glow { from { text-shadow: 0 0 15px #ffd700; } to { text-shadow: 0 0 40px #fff6a3; } }
    @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

    header { padding: 50px 20px; text-align: center; }
    header h1 { font-size: 3em; color: #ffd700; }

    .section { padding: 60px 20px; text-align: center; }
    .section h2 { font-size: 2.5em; margin-bottom: 20px; color: #00ffff; }

    .ip-container { margin-top: 40px; }
    .ip-image { width: 350px; max-width: 90%; border-radius: 18px; margin-bottom: 15px; box-shadow: 0 0 20px rgba(255,255,255,0.3); }
    .copy-button, .discord-button, .logout-button { background: rgba(255,255,255,0.08); color: #fff; padding: 14px 30px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.2); border-radius: 30px; cursor: pointer; transition: .3s; }
    .copy-button:hover, .discord-button:hover, .logout-button:hover { background: rgba(255,255,255,0.2); transform: scale(1.05); }

    .server-status { margin-top: 10px; font-size: 1.3em; font-weight: bold; }
    .server-online { color: #00ff9d; }
    .server-offline { color: #ff6b6b; }

    /* ‚úÖ Boutons fixes */
    .staff-button, .info-button, .cinema-button, .bloxfruits-button {
      position: fixed;
      top: 20px;
      padding: 12px 25px;
      background: rgba(255, 255, 255, 0.08);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 30px;
      font-size: 1em;
      text-decoration: none;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
      transition: .3s;
      z-index: 1000;
    }

    .staff-button { left: 20px; }
    .cinema-button { left: 220px; }
    .bloxfruits-button { left: 420px; }
    .info-button { right: 20px; }

    .staff-button:hover,
    .info-button:hover,
    .cinema-button:hover,
    .bloxfruits-button:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.05);
      box-shadow: 0 6px 35px rgba(0, 0, 0, 0.3);
    }

  </style>
</head>
<body>

  <div id="intro-screen"><h1>‚ú® Site Officiel Draevorn ‚ú®</h1></div>

  <!-- ‚úÖ Boutons fixes -->
  <a href="staff.html" class="staff-button">üëë Membre Staff</a>
  <a href="cinema.html" class="cinema-button">üé¨ Planning Cin√©ma</a>
  <a href="bloxfruits.html" class="bloxfruits-button">üçç Blox Fruits</a>
  <a href="histoire.html" class="info-button">üìñ Information Histoire</a>

  <header>
    <h1>‚ú® Draevorn</h1>
    <p>Factions Lumi√®re & T√©n√®bres - PvP | Magie | Qu√™tes | Conqu√™te</p>
  </header>

  <section class="section" id="presentation">
    <h2>Bienvenue sur Draevorn</h2>

    <div class="ip-container">
      <h3>IP du serveur</h3>
      <img src="image_2025-10-18_192004157.png" class="ip-image">

      <p class="server-status" id="mc-status">Chargement...</p>

      <button class="copy-button" onclick="copyIP()">üìã Copier l'IP : draevorn.serveminecraft.net:25595</button>
      <button class="logout-button" onclick="logout()">üö™ D√©connexion</button>
    </div>

    <br>
    <a href="https://discord.gg/C2Y4fAEBPh" target="_blank"><button class="discord-button">üí¨ Rejoindre le Discord</button></a>
  </section>

<script>
  function copyIP() {
    navigator.clipboard.writeText("draevorn.serveminecraft.net:25595");
    alert("IP copi√©e !");
  }

  function logout() {
    sessionStorage.removeItem('draevorn_logged');
    window.location.replace('login.html');
  }

  const ip = "draevorn.serveminecraft.net";
  const port = "25595";

  fetch(`https://api.mcsrvstat.us/2/${ip}:${port}`)
    .then(r => r.json())
    .then(data => {
      const status = document.getElementById("mc-status");
      if (data.online) {
        status.innerHTML = `üü¢ <span class="server-online">En ligne</span> (${data.players.online}/${data.players.max} joueurs)`;
      } else {
        status.innerHTML = `üî¥ <span class="server-offline">Hors ligne</span>`;
      }
    })
    .catch(() => {
      document.getElementById("mc-status").innerHTML = `‚ö†Ô∏è Impossible de v√©rifier`;
    });
</script>

</body>
</html>

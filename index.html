<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Draevorn - Factions Lumi√®re & T√©n√®bres</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet" />

  <!-- V√©rification de session -->
  <script>
    (function(){
      const s = sessionStorage.getItem('draevorn_logged');
      if (!s) {
        window.location.replace('login.html');
        return;
      }
      const data = JSON.parse(s);
      const maxAge = 24*60*60*1000;
      if (!data.user || (Date.now() - (data.ts || 0) > maxAge)) {
        sessionStorage.removeItem('draevorn_logged');
        window.location.replace('login.html');
        return;
      }
      console.log('Utilisateur connect√© :', data.user);
    })();
  </script>

  <style>
    :root{
      --gold: #ffd700;
      --bg1: #000000;
      --bg2: #001b33;
      --glow: #ffffff;
      --blueglow: #4db8ff;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
      color: white;
      overflow-x: hidden;
      min-height: 100vh;
      position: relative;
    }

    body::before, body::after {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at 30% 20%, rgba(77,184,255,0.08), transparent 60%),
                  radial-gradient(circle at 70% 80%, rgba(255,255,255,0.06), transparent 70%);
      animation: lights 8s ease-in-out infinite alternate;
      z-index: 0;
    }
    @keyframes lights {
      0% {opacity: 0.7; transform: scale(1);}    
      100% {opacity: 1; transform: scale(1.1);} 
    }

    .hamburger-menu {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 2400;
      display:flex;
      align-items:flex-start;
      gap:12px;
    }
    .hamburger {
      width: 42px;
      height: 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap:6px;
      padding:6px;
      border-radius:8px;
      cursor: pointer;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
      transition: transform .18s ease;
    }
    .hamburger div{
      height: 3px;
      width: 100%;
      background: var(--gold);
      border-radius: 3px;
      transition: all .22s ease;
    }
    .hamburger:active { transform: scale(.98); }
    .hamburger.active div:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .hamburger.active div:nth-child(2) { opacity: 0; transform: translateX(-6px); }
    .hamburger.active div:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

    .santa-dance {
      font-size: 26px;
      animation: santaDance 1.2s infinite alternate ease-in-out;
    }
    @keyframes santaDance {
      from { transform: rotate(-15deg) scale(1); }
      to { transform: rotate(15deg) scale(1.2); }
    }

    .side-menu {
      position: fixed;
      top: 0;
      left: -260px;
      width: 240px;
      height: 100vh;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(255,255,255,0.03);
      display: flex;
      flex-direction: column;
      padding-top: 72px;
      gap: 10px;
      transition: left .28s cubic-bezier(.2,.9,.3,1);
      z-index: 2300;
      box-shadow: 6px 0 40px rgba(0,0,0,0.6);
    }
    .side-menu.open { left: 0; }

    .side-menu a{
      color: #fff;
      text-decoration: none;
      font-size: 15px;
      padding: 12px 20px;
      margin: 0 12px;
      border-radius: 10px;
      display:flex;
      align-items:center;
      gap:10px;
      transition: transform .18s ease, background .18s ease;
      background: transparent;
    }
    .side-menu a:hover{
      background: rgba(255,255,255,0.06);
      transform: translateX(6px) scale(1.01);
      box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }

    header {
      position: relative;
      text-align: center;
      padding: 120px 20px 40px;
      z-index: 2;
    }
    header h1 {
      font-size: 64px;
      font-weight: 600;
      color: var(--glow);
      text-shadow: 0 0 15px rgba(255,255,255,0.8), 0 0 30px rgba(77,184,255,0.4), 0 0 60px rgba(77,184,255,0.3);
      animation: glowPulse 4s ease-in-out infinite;
    }
    @keyframes glowPulse {
      0%,100% { text-shadow: 0 0 15px rgba(255,255,255,0.8), 0 0 30px rgba(77,184,255,0.4), 0 0 60px rgba(77,184,255,0.3); }
      50% { text-shadow: 0 0 25px rgba(255,255,255,1), 0 0 50px rgba(77,184,255,0.7), 0 0 90px rgba(77,184,255,0.5); }
    }

    #link-wow {
      background: rgba(255,255,255,0.05);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 10px 20px;
      margin-top: 30px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.3s ease;
    }
    #link-wow:hover {
      background: rgba(77,184,255,0.2);
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <div class="hamburger-menu">
    <div class="hamburger" id="hamburger">
      <div></div><div></div><div></div>
    </div>
    <div class="santa-dance">üéÖ</div>

    <nav class="side-menu" id="side-menu">
      <a href="staff.html">üëë Membre Staff</a>
      <a href="cinema.html">üé¨ Planning Cin√©ma</a>
      <a href="bloxfruits.html">üçç Blox Fruits</a>
      <a href="boutique.html">üõí Boutique</a>
      <hr>
      <a href="#" class="logout-btn" id="logout-btn" onclick="logout()">üö™ D√©connexion</a>
    </nav>
  </div>

  <header>
    <h1>‚ú® Draevorn</h1>
    <p>Factions Lumi√®re & T√©n√®bres - PvP | Magie | Qu√™tes | Conqu√™te</p>
    <button id="link-wow">üîó Lier mon compte WoW</button>
    <div id="wow-result" style="margin-top:10px; color:#fff;"></div>
  </header>

  <script>
    document.getElementById('link-wow').addEventListener('click', async () => {
      const pseudo = prompt("Entre ton pseudo WoW :");
      if (!pseudo) return;

      document.getElementById('wow-result').textContent = "Connexion √† Draevorn WoW...";

      const res = await fetch('http://79.90.44.4/linkwow.php', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ pseudo })
      });

      const data = await res.json();

      if (data.success) {
        document.getElementById('wow-result').textContent = "‚úÖ Compte WoW li√© avec succ√®s !";
      } else {
        document.getElementById('wow-result').textContent = "‚ùå Erreur : " + data.error;
      }
    });
  </script>
</body>
</html>

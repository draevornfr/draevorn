<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion - Draevorn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Orbitron',sans-serif; }
    body {
      body {
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background: #000;
  color:#fff;
}

    }
    .login-card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      width: 380px;
      padding: 40px 30px;
      text-align:center;
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
      animation: fadeIn 1.5s ease;
    }
    @keyframes fadeIn { from {opacity:0; transform:translateY(30px);} to {opacity:1; transform:translateY(0);} }
    h1 { font-size:1.8em; color:#b19fff; margin-bottom:10px; }
    p { font-size:0.9em; color:#ccc; margin-bottom:25px; }
    .tab-btns { display:flex; justify-content:space-around; margin-bottom:20px; }
    .tab-btns button {
      background:none; border:none; color:#ccc; font-weight:bold; cursor:pointer;
      padding:10px 20px; border-radius:10px; transition:.3s;
    }
    .tab-btns button.active, .tab-btns button:hover { background: rgba(255,255,255,0.1); color:#fff; }
    .form-group { text-align:left; margin-bottom:20px; }
    label { display:block; margin-bottom:6px; color:#aaa; font-size:0.85em; }
    input { width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.2);
      background: rgba(0,0,0,0.4); color:#fff; outline:none; transition:.3s; }
    input:focus { border-color:#8a6bff; box-shadow:0 0 10px rgba(138,107,255,0.4); }
    .login-btn { width:100%; padding:12px; border:none; border-radius:10px;
      background: linear-gradient(90deg,#6a5aff,#8a6bff); color:#fff; font-weight:bold;
      cursor:pointer; font-size:1em; transition:.3s; }
    .login-btn:hover { transform:scale(1.05); box-shadow:0 0 15px rgba(138,107,255,0.6); }
    .error { color:#ff7777; margin-top:15px; font-size:0.9em; display:none; }
    footer { margin-top:25px; font-size:0.8em; color:#777; }
  </style>
</head>
<body>

<div class="login-card">
  <h1>Draevorn</h1>
  <p>Authentifiez-vous pour accéder au site</p>

  <div class="tab-btns">
    <button id="login-tab" class="active" onclick="showTab('login')">Se connecter</button>
    <button id="signup-tab" onclick="showTab('signup')">Créer un compte</button>
  </div>

  <!-- Formulaire Connexion -->
  <div id="login-form">
    <div class="form-group">
      <label>Nom d’utilisateur</label>
      <input type="text" id="login-username" placeholder="Entrer le nom d’utilisateur">
    </div>
    <div class="form-group">
      <label>Mot de passe</label>
      <input type="password" id="login-password" placeholder="Entrer le mot de passe">
    </div>
    <button class="login-btn" onclick="login()">Se connecter</button>
    <p class="error" id="login-error">❌ Identifiants incorrects</p>
  </div>

  <!-- Formulaire Création de compte -->
  <div id="signup-form" style="display:none;">
    <div class="form-group">
      <label>Nom d’utilisateur</label>
      <input type="text" id="signup-username" placeholder="Choisissez un nom d’utilisateur">
    </div>
    <div class="form-group">
      <label>Mot de passe</label>
      <input type="password" id="signup-password" placeholder="Choisissez un mot de passe">
    </div>
    <button class="login-btn" onclick="signup()">Créer le compte</button>
    <p class="error" id="signup-error">❌ Ce pseudo existe déjà</p>
    <p class="error" id="signup-success" style="color:#77ff77;">✅ Compte créé avec succès ! Vous pouvez vous connecter.</p>
  </div>

  <footer>v1.1 - Draevorn</footer>
</div>

<script>
  // Changement d’onglet
  function showTab(tab){
    document.getElementById('login-form').style.display = tab==='login'?'block':'none';
    document.getElementById('signup-form').style.display = tab==='signup'?'block':'none';
    document.getElementById('login-tab').classList.toggle('active', tab==='login');
    document.getElementById('signup-tab').classList.toggle('active', tab==='signup');
  }

  // Création de compte
  function signup(){
    const username = document.getElementById('signup-username').value.trim();
    const password = document.getElementById('signup-password').value.trim();
    const error = document.getElementById('signup-error');
    const success = document.getElementById('signup-success');
    error.style.display='none'; success.style.display='none';

    if(!username || !password){ 
      error.textContent='❌ Remplissez tous les champs'; error.style.display='block'; 
      return; 
    }

    const users = JSON.parse(localStorage.getItem('draevorn_users')||'{}');
    if(users[username]){
      error.textContent='❌ Ce pseudo existe déjà'; 
      error.style.display='block'; 
      return; 
    }

    users[username] = password; // simple stockage (non sécurisé pour un vrai site)
    localStorage.setItem('draevorn_users', JSON.stringify(users));
    success.style.display='block';
    document.getElementById('signup-username').value='';
    document.getElementById('signup-password').value='';
  }

  // Connexion
  function login(){
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();
    const error = document.getElementById('login-error');
    error.style.display='none';

    const users = JSON.parse(localStorage.getItem('draevorn_users')||'{}');
    if(users[username] && users[username] === password){
      // ✅ Création session 24h
      const now = Date.now();
      sessionStorage.setItem('draevorn_logged', JSON.stringify({user:username, ts: now}));
      document.body.style.transition="opacity 0.8s"; document.body.style.opacity=0;
      setTimeout(()=>window.location.href='index.html',800);
    } else {
      error.style.display='block';
    }
  }

  // Redirection si déjà connecté
  window.onload = function() {
    const s = sessionStorage.getItem('draevorn_logged');
    if(s){
      const data = JSON.parse(s);
      const maxAge = 24*60*60*1000;
      if(data.user && (Date.now() - (data.ts||0)) <= maxAge){
        window.location.href = 'index.html';
      } else {
        sessionStorage.removeItem('draevorn_logged');
      }
    }
  };
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profil - Draevorn</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --gold:#ffd700;--bg1:#000;--bg2:#001b33;--glow:#fff;--blueglow:#4db8ff;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Orbitron',sans-serif;color:#fff;
      min-height:100vh;overflow-x:hidden;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      position:relative;
      padding:40px 20px;
    }
    body::before,body::after{
      content:"";position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;
      background:radial-gradient(circle at 30% 20%,rgba(77,184,255,.1),transparent 60%),
      radial-gradient(circle at 70% 80%,rgba(255,255,255,.08),transparent 70%);
      animation:lights 8s ease-in-out infinite alternate;
    }
    @keyframes lights{0%{opacity:.7}100%{opacity:1;transform:scale(1.1)}}

    .container{
      position:relative;z-index:2;
      max-width:600px;margin:0 auto;
      padding:20px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.07);
      border-radius:20px;
      box-shadow:0 0 25px rgba(77,184,255,.35);
      text-align:center;
    }

    h1{
      font-size:36px;margin-bottom:15px;
      text-shadow:0 0 10px var(--glow),0 0 25px var(--blueglow);
    }

    #avatar{
      width:120px;height:120px;
      border-radius:12px;
      margin:15px auto;
      box-shadow:0 0 20px rgba(77,184,255,.4);
    }

    .stat{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      padding:12px;margin:10px 0;
      border-radius:12px;
      font-size:18px;
      box-shadow:0 0 15px rgba(77,184,255,.2);
    }

    .back{
      margin-top:20px;display:inline-block;
      padding:10px 20px;border-radius:20px;
      background:rgba(255,255,255,.1);
      text-decoration:none;color:white;
      transition:.25s;
    }
    .back:hover{background:rgba(77,184,255,.3);transform:scale(1.05)}
  </style>
</head>
<body>

  <div class="container">
    <h1>üßë Profil joueur</h1>
    <img id="avatar" src="" alt="Avatar Joueur">

    <div id="pseudo" class="stat">Pseudo : ...</div>
    <div id="online" class="stat">Statut : ...</div>
    <div id="level" class="stat">Niveau : ...</div>
    <div id="money" class="stat">Argent : ...</div>

    <a class="back" href="index.html">‚¨ÖÔ∏è Retour</a>
  </div>

  <script>
    // R√©cup pseudo depuis sessionStorage
    const session = sessionStorage.getItem('draevorn_logged');
    if (!session) window.location.replace('login.html');
    const user = JSON.parse(session).user;

    // API Minecraft
    const apiBase = "http://89.86.106.205:8080/playerdata";

    async function loadProfile(){
      const res = await fetch(apiBase + "?pseudo=" + user);
      const data = await res.json();

      document.getElementById('pseudo').textContent = "Pseudo : " + user;

      // Avatar Minecraft (skin t√™te)
      document.getElementById('avatar').src = `https://mc-heads.net/avatar/${user}/100`;

      if (data.success){
        document.getElementById('online').textContent = data.online ? "Statut : üü¢ En ligne" : "Statut : üî¥ Hors ligne";
        document.getElementById('level').textContent = "Niveau : " + (data.level ?? "Hors ligne");
        document.getElementById('money').textContent = "Argent : " + data.money + "üí∞";
      } else {
        document.getElementById('online').textContent = "Statut : inconnu";
        document.getElementById('level').textContent = "Niveau : ?";
        document.getElementById('money').textContent = "Argent : ?";
      }
    }

    loadProfile();
  </script>
</body>
</html>
